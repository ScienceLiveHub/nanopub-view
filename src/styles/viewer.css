/* Import Tailwind base utilities */
@import './tailwind.base.css';

/* Science Live Color Palette */
.nanopub-viewer {
    /* CSS variables for colors that Tailwind utilities use */
    --primary: #be2e78;
    --primary-hover: #a02463;
    --primary-light: #f5e8f0;
    --primary-dark: #8d1f57;
    
    --secondary: #101e43;
    --secondary-light: #1a2d5a;
    
    --text-dark: #1a1a1a;
    --text-medium: #4a4a4a;
    --text-light: #6b7280;
    --text-muted: #9ca3af;
    
    --bg-white: #ffffff;
    --bg-light: #f8f9fa;
    --bg-subtle: #f3f4f6;
    
    --border-light: #e5e7eb;
    --border: #d1d5db;
    --border-strong: #9ca3af;
    
    --assertion-bg: #fef3f7;
    --assertion-border: var(--primary);
    
    --accent: #f8deed;
}

.nanopub-viewer * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

.nanopub-viewer {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
    line-height: 1.65;
    color: var(--text-dark);
    background: #fff;
    font-size: 16px;
}

/* Typography - can be replaced with Tailwind classes in JS */
.nanopub-viewer h1, 
.nanopub-viewer h2, 
.nanopub-viewer h3, 
.nanopub-viewer h4, 
.nanopub-viewer h5, 
.nanopub-viewer h6 {
    font-weight: 600;
    letter-spacing: -0.01em;
    color: var(--secondary);
}

/* Legacy classes - gradually migrate these to Tailwind utilities */
.nanopub-viewer .container {
    @apply max-w-screen-xl mx-auto px-5;
}

.nanopub-viewer .header {
    @apply text-center mb-10 pb-5 border-b-2;
    border-color: var(--border-light);
}

.nanopub-viewer .header h1 {
    @apply text-4xl mb-2.5;
    color: var(--secondary);
    letter-spacing: -0.02em;
}

.nanopub-viewer .header p {
    @apply italic;
    color: var(--text-light);
}

.nanopub-viewer .upload-section {
    @apply rounded-lg p-8 mb-8 shadow-sm;
    background: var(--accent);
}

.nanopub-viewer textarea {
    @apply w-full p-3 border-2 rounded;
    min-height: 120px;
    border-color: var(--border);
    font-family: 'JetBrains Mono', 'Fira Code', 'Consolas', 'Monaco', 'Courier New', monospace;
    font-size: 13px;
    resize: vertical;
    letter-spacing: -0.01em;
}

.nanopub-viewer textarea:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: 0 0 0 3px rgba(190, 46, 120, 0.1);
}

.nanopub-viewer .btn {
    @apply px-8 py-3 rounded font-semibold transition-all duration-200 w-full mt-3;
    background: var(--primary);
    color: white;
    border: none;
    cursor: pointer;
    font-size: 16px;
    letter-spacing: 0.01em;
}

.nanopub-viewer .btn:hover {
    background: var(--primary-hover);
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(190, 46, 120, 0.15);
}

.nanopub-viewer .btn:active {
    transform: translateY(0);
}

/* Publication card - now uses Tailwind pub-card utility */
.nanopub-viewer .publication {
    @apply mb-10 hidden;
}

.nanopub-viewer .publication.active {
    @apply block;
}

/* Use Tailwind utilities where defined */
.nanopub-viewer .publication > .pub-header {
    /* Styled by Tailwind utility */
}

.nanopub-viewer .pub-title {
    /* Styled by Tailwind utility */
}

.nanopub-viewer .template-type {
    @apply inline-block px-3.5 py-1.5 rounded text-sm font-semibold mb-4;
    background: var(--secondary);
    color: white;
    letter-spacing: 0.01em;
}

.nanopub-viewer .pub-meta {
    @apply flex flex-wrap gap-8 mt-5 text-sm;
}

.nanopub-viewer .meta-item strong {
    color: var(--secondary);
    font-weight: 600;
}

.nanopub-viewer .meta-item a {
    color: var(--primary);
    text-decoration: none;
    transition: color 0.2s;
}

.nanopub-viewer .meta-item a:hover {
    color: var(--primary-hover);
}

/* Sections - use Tailwind pub-section utility */
.nanopub-viewer .section {
    @apply p-8;
}

.nanopub-viewer .section-header {
    @apply flex justify-between items-center mb-5 pb-3 border-b;
    border-color: var(--border-light);
}

.nanopub-viewer .section-header h2 {
    @apply text-2xl mb-0;
    color: var(--secondary);
    font-weight: 600;
}

.nanopub-viewer .toggle-raw {
    @apply px-4 py-2 rounded text-sm font-medium transition-all border-2;
    background: white;
    color: var(--text-medium);
    border-color: var(--border);
    cursor: pointer;
}

.nanopub-viewer .toggle-raw:hover {
    border-color: var(--primary);
    color: var(--primary);
}

/* Field display - use Tailwind field-group utility */
.nanopub-viewer .field {
    @apply mb-6;
}

.nanopub-viewer .field-label {
    /* Styled by Tailwind utility */
}

.nanopub-viewer .field-value {
    /* Styled by Tailwind utility */
}

.nanopub-viewer .field-value a {
    color: var(--primary);
    text-decoration: none;
    transition: color 0.2s;
}

.nanopub-viewer .field-value a:hover {
    color: var(--primary-hover);
    text-decoration: underline;
}

.nanopub-viewer .field-value ul {
    @apply mt-1 pl-5;
}

.nanopub-viewer .field-value li {
    @apply my-1;
}

/* Literal values - use Tailwind literal-box utility */
.nanopub-viewer .literal-value {
    /* Styled by Tailwind utility */
}

.nanopub-viewer .long-literal {
    @apply p-4 rounded my-2 border-l-4 whitespace-pre-wrap;
    background: white;
    border-color: var(--primary);
}

/* Provenance section */
.nanopub-viewer .provenance-section {
    @apply border-t;
    background: var(--bg-light);
    border-color: var(--border-light);
}

/* Error and loading states - use Tailwind utilities */
.nanopub-viewer .error {
    @apply p-4 rounded my-5 border-l-4 hidden;
    background: #fee;
    color: #c00;
    border-color: #c00;
}

.nanopub-viewer .error.active {
    @apply block;
}

.nanopub-viewer .loading {
    @apply text-center py-10 hidden;
    color: var(--text-light);
}

.nanopub-viewer .loading.active {
    @apply block;
}

/* Raw statements */
.nanopub-viewer .raw-statements {
    @apply p-4 rounded text-sm;
    background: var(--bg-light);
    font-family: 'JetBrains Mono', 'Fira Code', 'Consolas', 'Monaco', monospace;
}

.nanopub-viewer .statement-row {
    @apply py-1 flex gap-2.5 flex-wrap;
}

/* Decoded sentence */
.nanopub-viewer .decoded-sentence {
    @apply text-lg leading-7 p-5 rounded mb-5 font-medium border-l-4;
    background: white;
    color: var(--text-dark);
    border-color: var(--primary);
}

/* Main entity styling */
.nanopub-viewer .main-entity-group {
    @apply pb-6 mb-6;
    border-bottom: 2px solid var(--primary) !important;
}

.nanopub-viewer .main-entity-group .field-value {
    margin-left: 0;
}

/* Wikidata styling */
.nanopub-viewer .wikidata-item {
    @apply inline-block my-0.5;
}

.nanopub-viewer .wikidata-link {
    color: var(--primary);
    text-decoration: none;
    border-bottom: 1px dotted var(--primary);
    cursor: pointer;
    transition: all 0.2s;
}

.nanopub-viewer .wikidata-link:hover {
    color: var(--primary-hover);
    border-bottom-color: var(--primary-hover);
}

.nanopub-viewer .wikidata-description {
    @apply text-sm italic mt-1 hidden;
    color: var(--text-light);
}

.nanopub-viewer .wikidata-description.visible {
    @apply block;
}

/* Code blocks - use Tailwind code-block utility */
.nanopub-viewer .content-block {
    /* Styled by Tailwind utility */
}

.nanopub-viewer .content-block.collapsed {
    max-height: 150px;
    overflow: hidden;
    position: relative;
}

.nanopub-viewer .content-block.collapsed::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 50px;
    background: linear-gradient(to bottom, transparent, white);
    pointer-events: none;
}

.nanopub-viewer .content-block.expanded {
    max-height: none;
}

/* Show more button */
.nanopub-viewer .show-more-btn {
    @apply block mx-auto mt-2.5 px-4 py-2 rounded text-sm font-semibold transition-all border-2;
    background: white;
    color: var(--primary);
    border-color: var(--border);
    cursor: pointer;
}

.nanopub-viewer .show-more-btn:hover {
    background: var(--bg-subtle);
    border-color: var(--primary);
    transform: translateY(-1px);
}

/* Animations */
@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(-10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.nanopub-viewer .content-block.expanded,
.nanopub-viewer .long-literal.expanded {
    animation: fadeIn 0.3s ease;
}

/* Title links */
.nanopub-viewer .pub-title .title-link {
    @apply no-underline border-b-2 transition-all duration-200;
    color: var(--primary);
    border-color: var(--primary);
}

.nanopub-viewer .pub-title .title-link:hover {
    opacity: 0.8;
    color: var(--primary-hover);
    border-color: var(--primary-hover);
}

/* Citation section */
.nanopub-viewer .citation-section {
    @apply border-t p-8 mt-5;
    background: var(--bg-light);
    border-color: var(--border-light);
}

.nanopub-viewer .citation-section h3 {
    @apply text-xl mb-4 font-semibold;
    color: var(--secondary);
    letter-spacing: -0.01em;
}

.nanopub-viewer .citation-formats {
    @apply flex gap-2.5 mb-4 flex-wrap;
}

.nanopub-viewer .citation-format-btn {
    @apply px-4 py-2 rounded text-sm font-medium transition-all border-2 flex items-center gap-1.5;
    background: white;
    color: var(--text-dark);
    border-color: var(--border);
    cursor: pointer;
}

.nanopub-viewer .citation-format-btn:hover {
    border-color: var(--primary);
    color: var(--primary);
    transform: translateY(-1px);
}

.nanopub-viewer .citation-format-btn.active {
    background: var(--primary);
    color: white;
    border-color: var(--primary);
}

.nanopub-viewer .citation-display {
    @apply border rounded p-5 relative shadow-sm;
    background: white;
    border-color: var(--border-light);
}

.nanopub-viewer .citation-text {
    @apply text-sm leading-relaxed m-0 whitespace-pre-wrap break-words;
    font-family: Georgia, 'Times New Roman', serif;
    color: var(--text-dark);
}

.nanopub-viewer .citation-actions {
    @apply flex gap-2.5 mt-4;
}

.nanopub-viewer .citation-copy-btn {
    @apply px-5 py-2.5 rounded border-none transition-all;
    background: var(--primary);
    color: white;
    cursor: pointer;
}

.nanopub-viewer .citation-copy-btn:hover {
    background: var(--primary-hover);
    transform: translateY(-1px);
    box-shadow: 0 2px 8px rgba(190, 46, 120, 0.2);
}

/* Responsive */
@media (max-width: 768px) {
    .nanopub-viewer .pub-meta {
        @apply flex-col gap-4;
    }
    
    .nanopub-viewer .citation-formats {
        @apply flex-col;
    }
    
    .nanopub-viewer .citation-format-btn {
        @apply w-full justify-center;
    }
}

/* ============================================
   SHARE DROPDOWN FIX
   Force hide dropdown until button clicked
   ============================================ */
.nanopub-viewer .share-button {
    position: relative;
    display: inline-flex;
    align-items: center;
}

.nanopub-viewer .share-icon {
    background: none;
    border: none;
    font-size: 1.2em;
    cursor: pointer;
    padding: 5px;
    transition: all 0.2s;
    color: var(--secondary);
}

.nanopub-viewer .share-icon:hover {
    opacity: 0.7;
    color: var(--primary);
}

.nanopub-viewer .share-dropdown {
    position: fixed;
    background: white;
    border: 1px solid var(--border-light);
    border-radius: 4px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    min-width: 200px;
    z-index: 1000;
    display: none !important;
}

.nanopub-viewer .share-dropdown.active {
    display: block !important;
}

.nanopub-viewer .share-dropdown-item {
    padding: 12px 16px;
    cursor: pointer;
    border-bottom: 1px solid var(--border-light);
    font-size: 0.95em;
    transition: background-color 0.2s;
    display: flex;
    align-items: center;
    gap: 10px;
    color: var(--text-dark);
}

.nanopub-viewer .share-dropdown-item i {
    color: var(--primary);
    width: 16px;
}

.nanopub-viewer .share-dropdown-item:last-child {
    border-bottom: none;
}

.nanopub-viewer .share-dropdown-item:hover {
    background-color: var(--bg-subtle);
}

.nanopub-viewer .share-dropdown-divider {
    height: 1px;
    background-color: var(--border-light);
    margin: 8px 0;
}
